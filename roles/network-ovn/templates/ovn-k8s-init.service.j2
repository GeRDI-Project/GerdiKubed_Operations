[Unit]
Description=Open virtual net kubernetes gateway helper
Documentation=https://github.com/openvswitch/ovn-kubernetes/README.md

[Service]
ExecStart=/usr/bin/ovnkube \
 -k8s-kubeconfig /opt/k8s/kubeconfig \
 -init-node "{{ inventory_hostname }}" \
 -cluster-subnet "{{ K8S_CLUSTER_IP_SUBNET }}" \
 -k8s-token "{{ OVN_API_TOKEN }}" \
 -k8s-cacert {{ K8S_CERT_FILES_DIR }}/ca.crt.pem \
 -k8s-apiserver "https://{{ K8S_MASTER_IP }}:443" \
 -service-cluster-ip-range "{{ K8S_SERVICE_IP_SUBNET }}" \
 -nodeport \
 -init-gateways \
 -nb-address="tcp://{{ K8S_MASTER_IP }}:6641" \
 -sb-address="tcp://{{ K8S_MASTER_IP }}:6642"
Restart=on-failure
RestartSec=10
WorkingDirectory=/root/

[Install]
WantedBy=multi-user.target
