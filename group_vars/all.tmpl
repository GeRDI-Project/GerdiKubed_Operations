# Global configuration
# Change the following values:
K8S_CLUSTER_NAME: "test" # this MUST NOT include UPPERCASE chars!
K8S_VERSION: "vx.y.z"
K8S_GLOBAL_LOG_LEVEL: "v=2"
K8S_MASTER_IP: "<w.x.y.z>"

# Certificates will be created with both DNS-names and IP-Adresses in the alternative names.
# DNS-names in certs will comply to the following pattern:
# {{ K8S_CLUSTER_NAME }}-[mstr|node]-{{ hostname_suffix }}.{{ K8S_DOMAIN_NAMESPACE }}
K8S_DOMAIN_NAMESPACE: "example.com"
# Having dns entries that matches the above named pattern is optional
# (not required for a functional cluster)
# As long as the inventory are listed as IPs and not names.
# TODO: Make IPs an alternate name by default.

# Base dir on all machines (except CONTROL_MACHINE)
K8S_BASE_DIR: /opt/k8s
# Directories in which the k8s binaries reside
K8S_K8S_DIR: "{{ K8S_BASE_DIR }}/kubernetes"
K8S_SERVER_BIN_DIR: "{{ K8S_K8S_DIR }}/server/kubernetes/server/bin"

# Intercluster addresses, authorization and authentication information
K8S_KUBECONFIG: "{{ K8S_BASE_DIR }}/kubeconfig"
K8S_DOWNLOAD_URL: "https://github.com/kubernetes/kubernetes/releases/download/{{K8S_VERSION}}/kubernetes.tar.gz"

# role: cert-infrastructure
CONTROL_MACHINE:    "127.0.0.1"
# Do not use ~ or relative paths, please spell out absolute path
CONTROL_BASE_DIR:   "<some_dir>"
CONTROL_CERT_DIR:   "{{ CONTROL_BASE_DIR }}/certs"
CONTROL_KEY_DIR:    "{{ CONTROL_BASE_DIR }}/keys"
CONTROL_CONFIG_DIR: "{{ CONTROL_BASE_DIR }}/configs"
CONTROL_CSR_DIR:    "{{ CONTROL_BASE_DIR }}/csrs"
CONTROL_CA_DIR:     "{{ CONTROL_BASE_DIR }}/ca"

# roles: apiserver, k8s-binaries, common, kubelet, etcd, network_ovn
K8S_CERT_FILES_DIR: "{{ K8S_BASE_DIR }}/certs"
K8S_KEY_FILES_DIR: "{{ K8S_BASE_DIR }}/keys"
K8S_AUTH_FILES_DIR: "{{ K8S_BASE_DIR }}/tokens"

# roles: apiserver, network_ovn, controller-manager
# this is an example:
# We will have 255 class-c nets for the same number of nodes
# 10.220.hostname_suffix.0/24 IPs for each nodes
# 10.221.0.0/16 IPs service ports
K8S_CLUSTER_IP_PRE:    "10.220"
K8S_CLUSTER_IP_SUBNET: "{{ K8S_CLUSTER_IP_PRE }}.0.0/15"
K8S_SERVICE_IP_PRE:    "10.222"
K8S_SERVICE_IP_SUBNET: "{{ K8S_SERVICE_IP_PRE }}.0.0/16"

# role: cni
CNI_VERSION: v0.4.0
CNI_DOWNLOAD_URL: "https://github.com/containernetworking/cni/releases/download/{{ CNI_VERSION }}/cni-{{ CNI_VERSION }}.tgz"
CNI_DIR: "{{ K8S_BASE_DIR }}/cni-{{ CNI_VERSION }}"
CNI_CONF_DIR: /etc/cni/net.d

# role: network_ovn
OVN_API_TOKEN: "someValue"
OVN_ENCAP_TYPE: geneve
OVN_K8S_DIR: "{{ K8S_BASE_DIR }}/ovn-kubernetes"
# this is an example
# each master will have 10.223.hostname_suffix.0/24 at its disposal
OVN_MASTER_SUBNET_PRE: 10.223

# role: etcd
ETCD_VERSION: v3.0.17
ETCD_DOWNLOAD_URL: "https://github.com/coreos/etcd/releases/download/{{ ETCD_VERSION }}/etcd-{{ ETCD_VERSION }}-linux-amd64.tar.gz"
ETCD_DIR: "{{ K8S_BASE_DIR }}/etcd-{{ ETCD_VERSION }}-linux-amd64"

# role: apiserver
# Only one, but also at least one of these should be set to True.
APISERVER_AS_POD: False
APISERVER_AS_SERVICE: True

# role: scheduler
# Only one, but also at least one of these should be set to True.
SCHEDULER_AS_POD: False
SCHEDULER_AS_SERVICE: True

# role: controller-manager
# Only one, but also at least one of these should be set to True.
CONTROLLER_MANAGER_AS_POD: False
CONTROLLER_MANAGER_AS_SERVICE: True
